
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>Sticky Footer Navbar Template for Bootstrap</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="main.js"></script>
    <!-- Custom styles for this template -->
    <link href="upload.css" rel="stylesheet">
</head>

<body>

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" >
            
            <div class="collapse navbar-collapse" id="navbarCollapse">
            
            
            <ul class="navbar-nav mr-auto d-flex">
                   <li class="nav-item">
                    <div class="navbar-brand" >Deloitte</div>
                   </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="Home.html">Home </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="upload.html" >Upload</a>
                    </li>
                    <li class="nav-item ">
                      <a class="nav-link" href="#"style="color:white">User Management<span class="sr-only"></span></a>
                   </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link disabled" href="#">Disabled</a>
                    </li> -->
                </ul>
            <button type="button" class="btn btn-dark bg-dark d-flex ms-auto link-light " style="text-decoration: none; margin-inline:20px;" onclick="signoutbtn()">Sign Out</button>
            </div>
        </nav>
    </header>

<main>
  <div style="margin-top:100px;" class="ms-3">
  <div class="mb-3">
    <label for="exampleFormControlInput1" class="form-label">First Name</label>
    <input type="text" class="form-control" id="fName" placeholder="John">
  </div>
  <div class="mb-3">
    <label for="exampleFormControlInput1" class="form-label">Last Name</label>
    <input type="text" class="form-control" id="lName" placeholder="doe">
  </div>
  <div class="mb-3">
    <label for="exampleFormControlInput1" class="form-label">Change Password</label>
    <input type="password" class="form-control" id="passw" placeholder="password">
  </div>
  <div class="mb-3">
    <label for="exampleFormControlInput1" class="form-label">Contact Number</label>
    <input type="number" class="form-control" id="contact" placeholder="9999999999">
  </div>
  <button type="button" onclick ="Update() "class="btn btn-primary">Update</button>
</div>
</main>

<footer class="page-footer fixed-bottom bg-dark text-center font-small mt-4 wow fadeIn  ">

    <div class="footer-container1 mb-3">
        Footer

    </div>
    <div class="bg-dark footer-container2">
        <div class="footer_links mt-3">
            <h6>
                Footer links and menu items.
            </h6>
        </div>
        <div class="copyright">
            <small>
                Copyright@Deloitte.com | 2022

            </small>

        </div>
    </div>

</footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
        $("#files").change(function() {
        filename = this.files[0].name;
         document.getElementById("showName")=filename;
        });

        function Update() {
            var userid;
            //getting session details
            var settings = {
                "url": "http://localhost:5000/api/Session/GetId",
                "method": "GET",
                "timeout": 0,
                async: false,
            };

            $.ajax(settings).done(function (response) {
                userid = response;
            }).fail(function (response) {
                alert("fail");
            });

            var contact_id = document.getElementById("contact").value;
            if (!contact_id) {
                contact_id = "0";
            }
            var data = JSON.stringify({
                "id": userid,
                "firstName": document.getElementById("fName").value,
                "lastName": document.getElementById("lName").value,
                "contact": parseInt(contact_id),
                "password": document.getElementById("passw").value,
                "isDeleted": false
            });
            var xhr = new XMLHttpRequest();
            xhr.withCredentials = true;

            xhr.addEventListener("readystatechange", function () {
                if (this.readyState === 4) {
                    console.log(this.responseText);
                    var firstname, lastname, name;

                    //getting name from User table to update metadata table information
                    urlFName = "http://localhost:5000/api/User/GetfirstName" + "?username=" + userid;
                    var settingsFName = {
                        "url": urlFName,
                        "method": "GET",
                        "timeout": 0,
                        async: false,
                    };

                    $.ajax(settingsFName).done(function (response) {
                        firstname = response;
                    }).fail(function (response) {
                        alert("fail");
                    });

                    urlLName = "http://localhost:5000/api/User/GetlastName" + "?username=" + userid
                    var settingsLName = {
                        "url": urlLName,
                        "method": "GET",
                        "timeout": 0,
                        async: false,
                    };

                    $.ajax(settingsLName).done(function (response) {
                        lastname = response;
                    }).fail(function (response) {
                        alert("fail");
                    });
                    name = firstname + " " + lastname;

                    //Updating all metadata names
                    md_url = "http://localhost:5000/api/Metadata/" + userid + "?fullname=" + name ;
                    var settings = {
                        "url": md_url,
                        "method": "PUT",
                        "timeout": 0,
                        async: false,
                    };

                    $.ajax(settings).done(function (response) {
                        signoutbtn();
                    }).fail(function (response) {
                        alert("fail");
                    });
                }
            });

            xhr.open("PUT", "http://localhost:5000/api/User");
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.send(data);

        }
    </script>
</body>

</html>