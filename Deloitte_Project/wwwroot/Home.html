
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>Sticky Footer Navbar Template for Bootstrap</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="main.js"></script>
    <!-- Custom styles for this template -->
    <link href="upload.css" rel="stylesheet">
</head>

<body onload="showFiles()">

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" >
            
            <div class="collapse navbar-collapse" id="navbarCollapse">
            
            
            <ul class="navbar-nav mr-auto d-flex">
                   <li class="nav-item">
                    <div class="navbar-brand" >Deloitte</div>
                   </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="#" style="color:white"><span class="sr-only">Home</span> </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="upload.html" >Upload</a>
                    </li>
                    <li class="nav-item ">
                      <a class="nav-link" href="user_management.html">User Management</a>
                   </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link disabled" href="#">Disabled</a>
                    </li> -->
                </ul>
                <button class="ms-auto link-light sign-out-btn" onclick="signoutbtn()">SignOut</button>
            
            </div>
        </nav>
    </header>

   
<main>
  <div class ="rounded"style="margin-top:100px; border: radius 5px;">
  <div class="p-3 mb-2 bg-secondary text-white">Welcome_deloitteUser</div>
  </div>
  <div class="row ms-2 mt-5">
    <div class="col-4">
      <p class="text-white bg-dark">List of Processed Files</p>
      <div class="list-group">
        <!--<a href="#" class="list-group-item list-group-item-action active" id = "selected" aria-current="true">
          The current link item
        </a>-->
          <p id="add_after_me"></p>
        <!--<button class="list-group-item list-group-item-action" id = "add_after_me" type = "button" onclick ="showDetails()">A second link item</button>-->
      </div>
    </div>
    <div class="col-8">
      <p class="text-white bg-dark">Document Metadata</p>
      <div class="row mt-3">
          <div class="col-4">
              
              <label type="button" id="file_name" class="btn btn-secondary">File Name</label>
             
          </div>
          <div class="col-8">
          <div class=" d-inline-flex" id="file_nametxt">essay1.txt </div>
          <button alt="Download" onclick ="Download()" class="btn btn-secondary mx-5" type="button" style="width:fit-content">download</button>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-4">
          <label type="button"  id = "created_by" class="btn btn-secondary">Created By</label>
        </div>
        <div class="col-8 d-inline-flex" id = "created_bytxt">sneha@deloitte.com</div>
      </div>
      <div class="row mt-3">
        <div class="col-4">
          <label type="button"  id = "created_on" class="btn btn-secondary">Created On</label>
        </div>
        <div class="col-8 d-inline-flex"  id = "created_ontxt">03/07/2022</div>
      </div>
     
    </div>
  </div>
</main>

  <footer class="page-footer fixed-bottom bg-dark text-center font-small mt-4 wow fadeIn  ">

  <div class="footer-container1" >
    Footer
    
  </div>
  <div class="bg-dark footer-container2">
    <div style="color:white;text-align: left;">
        Footer links and menu items.
    </div>
    <div style="color:white;text-align: left;">
       Copyright@Deloitte.com | 2021
    </div>
  </div>
  
</footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
        function showDetails(ele){
            //alert("im in da function too much raining");
            var smt = ele.id;
          
            var url1 = "http://localhost:5000/api/Metadata/";
            url1+=smt;
            
            var settings = {
                "url": url1,
                "method": "GET",
                "timeout": 0,
            };

            $.ajax(settings).done(function (response) {
                
                document.getElementById("file_nametxt").innerHTML = response[2];
                document.getElementById("created_bytxt").innerHTML = response[0];
                document.getElementById("created_ontxt").innerHTML = response[1];
            });


           
           


           
        }
        function showFiles() {
            var i = 0;
            var settings = {
                "url": "http://localhost:5000/api/Metadata/GetMetadata",
                "method": "GET",
                "timeout": 0,
            };
           

            $.ajax(settings).done(function (response) {
         
                for (i = 0; i < response.length; i++) {
                    
                    var listitem = '<button class= "list-group-item list-group-item-action" id = "'
                    listitem += (i + 1).toString();
                    listitem += '" type = "button" onclick ="showDetails(this)">';    
                    listitem += response[i];
                    listitem += '</button>';
                    document.getElementById("add_after_me").insertAdjacentHTML("afterend",listitem);
                }
            });
            
        }

        function Download() {
            var fn = document.getElementById("file_nametxt").innerHTML.toString();
            var url_downl = "http://localhost:5000/api/File/Download?fileName=";
            url_downl += fn;

            var requestOptions = {
                method: 'GET',
                redirect: 'follow',
                async: false
            };

            fetch(url_downl, requestOptions)
                .then(response => response.blob())
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    // the filename you want
                    a.download = fn;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                });
        }
    </script>
</body>

</html>